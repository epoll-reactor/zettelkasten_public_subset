POP3 - протокол передачи почты. Более легковесный чем SMTP.
Нужен для получения почты, хранящейся на сервере.

POP3 не предоставляет расширенных возможностей для работы с почтой,
обычно, почта скачивается на диск и после удаляется.
Более сложный протокол - IMAP4 (RFC1730).

POP3 запускается на TCP порту 110.

Команды POP3 - ключевое слово независимое к регистру, может
иметь один или несколько аргументов. Все команды заканчиваются
CRLF-парой (\r\n). Все ответы POP3 также заканчиваются CRLF-парой.
Сервер посылает индикатор +OK или -ERR, чтобы уведомить об ошибках.
В конце сообщения содержится точка.

Многострочный ответ заканчивается пятью CRLF-парами.

Сессия POP3 переходит из состояния в состояние во время работы.
1) Когда открыто TCP-соединение, POP3 переходит в состояние
   AUTHORIZATION. Происходит идентификация клиента серверу.

2) Далее POP3 переходит в TRANSACTION состояние. Клиент запрашивает
   некоторые действия со стороны сервера.

3) Когда клиент передал команду QUIT, POP3 переходит
   в состояние UPDATE. POP3 освобождает ресурсы занятые во время сессии
   и говорит "пока". TCP-соединение закрывается.

В случае некорректной команды или состояния, сервер обязан ответить -ERR.

POP3 может иметь таймер выхода. Обычно это 10 минут. По истечению
этого срока TCP-соединение закрывается автоматически.

состояние AUTHORIZATION:
Сервер отправляет строку вроде "+OK POP3 server ready".
На стороне клиента возможно 2 способа авторизации: USER и PASS или APOP.
Если авторизация не удалась - отправляется -ERR.
После того как POP3 соединился с сервером - он записывает в каждое сообщение
его порядковый номер и размер в октетах.

состояние TRANSACTION:
Теперь клиент может отправлять команды. После каждой команды сервер отправляет
ответ. Описание всех команд здесь: https://www.ietf.org/rfc/rfc1939.txt.

состояние UPDATE:
Важно: когда клиент отправил команду QUIT из AUTHORIZATION состояния,
сессия не переходит в состояние UPDATE.


К сожалению, POP3 не позволяет обрабатывать сотни или тысячи писем
за раз.

Сервер может сам удалить письмо с сервера и POP3 не в состоянии это
проконтроллировать. Однако такие удаления не являются нарушением протокола.

